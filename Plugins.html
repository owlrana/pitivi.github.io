<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Creating a simple plugin.</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>

<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form action="" class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/pitivi.svg" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
							</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>The Pitivi Developer Documentation</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Pitivi-1.0" data-hotdoc-ref="Plugins.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Plugins.md" data-hotdoc-role="main">
        <h1 id="creating-a-simple-plugin">Creating a simple plugin.</h1>
<p>Let's start to write plugins!</p>
<p>Pitivi's Plugin Manager is based on libpeas. Currently we support plugins written in Python 3. If you want to see examples of already written plugins you can put an eye on the <code>plugins/</code> directory.</p>
<h1 id="plugins-location">Plugins Location.</h1>
<p>Plugins that are supported by Pitivi can be found at <code>$PITIVI_INSTALLATION_DIR/plugins/</code>. In the other side, plugins from third-party developers should be place at the following directory <code>$HOME/.local/share/pitivi/plugins/</code>. <em>Remember that if this directory does not exist it should be created.</em></p>
<h1 id="creating-a-plugin-description">Creating a <strong>.plugin</strong> description</h1>
<p>The first step to create plugin is to create a plugin description file. By convention, this file should be named <code>module-name.plugin</code>.</p>
<pre><code class="language-ini">[Plugin]
Name=Hello World
Description=A very simple plugin.
Authors=Example &lt;example@example.com&gt;
website=http://example.foo
Copyright=Copyright © Example

Loader=python3
Module=hello_world
</code></pre>
<p><em>For a complete example of a plugin description file, see <a href="https://developer.gnome.org/libpeas/stable/PeasPluginInfo.html">PeasPluginInfo documentation</a>.</em></p>
<h1 id="creating-the-python-module">Creating the Python module</h1>
<p>The only interface available to implement by Pitivi extensions is the <a href="https://lazka.github.io/pgi-docs/#Peas-1.0/classes/Activatable.html#Peas.Activatable">Peas.Activatable</a>. Extension modules should implement this interface and internally as soon this module is loaded Pitivi will set to it the <em>object</em> attribute to the Pitivi application object, which will give you access to almost <em>everything</em>.</p>
<p>Now create the file <code>hello_world.py</code> in the same directory of <code>hello-world.py</code>.</p>
<pre><code class="language-python">class HelloWorld(GObject.Object, Peas.Activatable):
    object = GObject.Property(type=GObject.Object)

    def __init__(self):
        GObject.Object.__init__(self)

    def do_activate(self):
        print("Hello world!")

    def do_deactivate(self):
        print("Bye!")
</code></pre>
<p><strong>Yes, that's it. You've just created your first plugin!</strong> It will print a message in the <strong>terminal</strong> when you activate or deactivate the plugin.</p>
<h1 id="activating-the-plugin">Activating the plugin</h1>
<p>Now open Pitivi <strong>from a terminal</strong> (so you can see the message printed by the plugin). Follow these steps to activate the plugin:</p>
<ol>
<li>Click the menu to display the <em>Pitivi Menu</em>.</li>
<li>Click <code>Preferences</code> to open the <em>Pitivi Preferences Dialog</em>.</li>
<li>Click <code>Plugins</code> to display the list of available plugins.</li>
</ol>
<p><em>You should see that the <strong>Hello World</strong> plugin is there.</em></p>
<p><img src="images/Plugins_Hello_World_preferences.png" alt=""></p>
<ol start="4">
<li>Click the switch <code>OFF</code> button to activate the plugin.</li>
</ol>
<p><em>If you put an eye the terminal you will see that the message "Hello World" is printed</em></p>
<h1 id="dectivating-the-plugin">Dectivating the plugin</h1>
<p>To deactivate the plugin, follow the same steps of <strong><strong>Activating the plugin</strong></strong> until <strong>step 3</strong>.</p>
<ol start="4">
<li>Click the switch <code>ON</code> button to deactivate the plugin.</li>
</ol>
<h1 id="access-to-the-plugin">Access to the plugin</h1>
<p>In <strong>Creating the Python module</strong> we mentioned that we can access to the internal objects of Pitivi. In the next tutorials, you will see more complex examples, but for the while you may see this example and play with it.</p>
<pre><code class="language-python">from gi.repository import GObject
from gi.repository import Peas

class ProjectLoader(GObject.Object, Peas.Activatable):
    object = GObject.Property(type=GObject.Object)

    def __init__(self):
        GObject.Object.__init__(self)
        self.app = None

    def do_activate(self):
        API = self.object
        # When the plugin is activated, you get the Pitivi.Application object.
        self.app = API.app
        # So you can use it however you want.
        # You can access to the Main Window.
        main_window = self.app.gui
        # Or you can access to the timeline.
        timeline = main_window.timeline_ui.ges_timeline
        # Or you can access to the project manager.
        project_manager = self.app.project_manager
        # And maybe you want to load a project from some uri.
        project_manager.loadProject("file:///some/uri/project.xges")

    def do_deactivate(self):
        # And maybe you want to load a new project when deactivating the plugin.
        self.app.project_manager.newBlankProject()
        self.app = None
</code></pre>
<p>When you activate this plugin, it will load a project form <code>/some/uri/project.xges</code>. But, when you deactivate the plugin, it will create a new blank project. Of course, if <code>/some/uri/project.xges</code> does not exist, a dialog warning about it will appear, but we want to keep the example  simple.</p>

    </div>
        




		<div id="subpages">
	<p><b>Subpages:</b></p>
			<p>
		<a href="Gap_Remover_plugin.html">Creating Plugins for the Timeline</a>
		–
					<i><em>No description available</em></i>
				</p>
	</div>
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		<a href="https://gitlab.gnome.org/GNOME/pitivi/edit/master/docs/Plugins.md" data-hotdoc-role="edit-button">Edit on GitLab</a>

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>
